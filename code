import serial
import numpy
import matplotlib.pyplot as plt
from drawnow import*

time = []
celsius = []
arduinoData = serial.Serial('COM3', 9600)
plt.ion()
x=0

def makeFig():
    plt.plot([time], [celsius], 'ro-')
    plt.title('T(t)')
    plt.grid(True)
    plt.ylabel('Temperatura (Celsius)')
    plt.xlabel('Tempo (milissegundos)')
         
    
while True:
    while ( arduinoData.inWaiting()==0):
     pass
    arduinoString = arduinoData.readline()
    print arduinoString
    dataArray = arduinoString.split(',')
    tempo = float (dataArray[0])
    temp = float (dataArray[1])
    time.append(tempo)
    celsius.append(temp)
    x=x+1
    if (x<=20):
        drawnow(makeFig)
    else:
        plt.show(makeFig)
